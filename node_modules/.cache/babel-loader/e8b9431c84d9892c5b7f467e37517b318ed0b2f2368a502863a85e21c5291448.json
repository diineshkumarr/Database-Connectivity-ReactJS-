{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./Output.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Output=()=>{const[contacts,setContacts]=useState([]);const[error,setError]=useState('');const[editingContact,setEditingContact]=useState(null);// Store the contact currently being edited\nuseEffect(()=>{// Fetch contacts from backend\naxios.get('${process.env.REACT_APP_API_URL}/api/contact').then(response=>{setContacts(response.data);// Save the contacts data to state\n}).catch(err=>{console.error('Error fetching contacts:',err);setError('Error fetching contacts');});},[]);// Empty dependency array ensures it runs once on component mount\nconst handleEdit=contact=>{// When the Edit button is clicked, set the contact for editing\nsetEditingContact(contact);};const handleDelete=id=>{// Handle delete operation\naxios.delete(`${process.env.REACT_APP_API_URL}/api/contact/${id}`).then(response=>{setContacts(contacts.filter(contact=>contact._id!==id));// Remove the deleted contact from the state\nalert('Contact deleted successfully');}).catch(err=>{console.error('Error deleting contact:',err);alert('Error deleting contact');});};const handleUpdate=()=>{// Update the contact on the server\naxios.put(`${process.env.REACT_APP_API_URL}/api/contact/${editingContact._id}`,editingContact).then(response=>{setContacts(contacts.map(contact=>contact._id===editingContact._id?response.data:contact));// Update the contact in state\nsetEditingContact(null);// Reset the editing form\nalert('Contact updated successfully');}).catch(err=>{console.error('Error updating contact:',err);alert('Error updating contact');});};const handleInputChange=e=>{const{name,value}=e.target;setEditingContact({...editingContact,[name]:value});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Contacts\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),editingContact?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Contact\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleUpdate();},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",value:editingContact.firstName,onChange:handleInputChange,placeholder:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",value:editingContact.lastName,onChange:handleInputChange,placeholder:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:editingContact.username,onChange:handleInputChange,placeholder:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:editingContact.email,onChange:handleInputChange,placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"message\",value:editingContact.message,onChange:handleInputChange,placeholder:\"Message\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update Contact\"})]})]}):/*#__PURE__*/// If not editing, show the contacts list\n_jsx(\"ul\",{children:contacts.map(contact=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-data\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[contact.firstName,\" \",contact.lastName]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"em\",{children:contact.username}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{className:\"email-form\",href:`mailto:${contact.email}`,children:contact.email}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:contact.message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(contact),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(contact._id),children:\"Delete\"})]},contact._id))})]});};export default Output;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Output","contacts","setContacts","error","setError","editingContact","setEditingContact","get","then","response","data","catch","err","console","handleEdit","contact","handleDelete","id","delete","process","env","REACT_APP_API_URL","filter","_id","alert","handleUpdate","put","map","handleInputChange","e","name","value","target","children","style","color","onSubmit","preventDefault","type","firstName","onChange","placeholder","lastName","username","email","message","className","href","onClick"],"sources":["E:/contact-form/src/Output.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './Output.css';\r\n\r\nconst Output = () => {\r\n  const [contacts, setContacts] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [editingContact, setEditingContact] = useState(null); // Store the contact currently being edited\r\n\r\n  useEffect(() => {\r\n    // Fetch contacts from backend\r\n    axios.get('${process.env.REACT_APP_API_URL}/api/contact')\r\n      .then(response => {\r\n        setContacts(response.data);  // Save the contacts data to state\r\n      })\r\n      .catch(err => {\r\n        console.error('Error fetching contacts:', err);\r\n        setError('Error fetching contacts');\r\n      });\r\n  }, []);  // Empty dependency array ensures it runs once on component mount\r\n\r\n  const handleEdit = (contact) => {\r\n    // When the Edit button is clicked, set the contact for editing\r\n    setEditingContact(contact);\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    // Handle delete operation\r\n    axios.delete(`${process.env.REACT_APP_API_URL}/api/contact/${id}`)\r\n      .then(response => {\r\n        setContacts(contacts.filter(contact => contact._id !== id)); // Remove the deleted contact from the state\r\n        alert('Contact deleted successfully');\r\n      })\r\n      .catch(err => {\r\n        console.error('Error deleting contact:', err);\r\n        alert('Error deleting contact');\r\n      });\r\n  };\r\n\r\n  const handleUpdate = () => {\r\n    // Update the contact on the server\r\n    axios.put(`${process.env.REACT_APP_API_URL}/api/contact/${editingContact._id}`, editingContact)\r\n      .then(response => {\r\n        setContacts(contacts.map(contact => (contact._id === editingContact._id ? response.data : contact))); // Update the contact in state\r\n        setEditingContact(null);  // Reset the editing form\r\n        alert('Contact updated successfully');\r\n      })\r\n      .catch(err => {\r\n        console.error('Error updating contact:', err);\r\n        alert('Error updating contact');\r\n      });\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setEditingContact({ ...editingContact, [name]: value });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Contacts</h1>\r\n\r\n      {/* Display error message if there is one */}\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n      {/* If we are editing a contact, show the editing form */}\r\n      {editingContact ? (\r\n        <div>\r\n          <h2>Edit Contact</h2>\r\n          <form onSubmit={(e) => { e.preventDefault(); handleUpdate(); }}>\r\n            <input\r\n              type=\"text\"\r\n              name=\"firstName\"\r\n              value={editingContact.firstName}\r\n              onChange={handleInputChange}\r\n              placeholder=\"First Name\"\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              name=\"lastName\"\r\n              value={editingContact.lastName}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Last Name\"\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              value={editingContact.username}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Username\"\r\n            />\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={editingContact.email}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Email\"\r\n            />\r\n            <textarea\r\n              name=\"message\"\r\n              value={editingContact.message}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Message\"\r\n            />\r\n            <button type=\"submit\">Update Contact</button>\r\n          </form>\r\n        </div>\r\n      ) : (\r\n        // If not editing, show the contacts list\r\n        <ul>\r\n          {contacts.map((contact) => (\r\n            <li key={contact._id} className=\"list-data\">\r\n              <strong>{contact.firstName} {contact.lastName}</strong><br />\r\n              <em>{contact.username}</em><br />\r\n              <a className='email-form' href={`mailto:${contact.email}`}>{contact.email}</a><br />\r\n              <p>{contact.message}</p>\r\n              <button onClick={() => handleEdit(contact)}>Edit</button>\r\n              <button onClick={() => handleDelete(contact._id)}>Delete</button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Output;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}